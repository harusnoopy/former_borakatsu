<div class="container">
  <div class="row">
    <div class="col-md-9 offset-md-1">
      <h5 class="mt-4 mx-5 mb-2">イベント詳細</h5>
    </div>
  </div>

  <div class="row">
    <div class="col offset-md-1">
      <table>
        <%= render 'public/shared/event_detail', event: @event %>
        <tr>
          <th class="pt-3 pr-5">募集状況</th>
          <td class="pt-3">
            <% if @event.is_recruiting == true %>
              <p class="text-success m-0"><strong>募集中</strong></p>
            <% else %>
              <p class="text-secondary m-0">締切</p>
            <% end %>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <div class="row justify-content-center">
    <% if user_signed_in? %>
      <% if @event.participation_users.exists?(id: current_user.id) %>
        <div class="form-inline">
          <p class="text-info font-weight-bold mt-3">応募済</p>
        </div>
        <%= hidden_field_tag :event_id, @event.id %>
        <%= link_to "応募をキャンセルする",  cancel_path, method: :patch, class: "btn btn-danger my-3 ml-5 px-4", data: {confirm: "キャンセルしてもよろしいですか？"} %>
      <% elsif @event.is_recruiting == true %>
        <%= form_with model: @participation, url: confirm_path do |f| %>
          <div class="form-inline">
            <%= f.hidden_field :event_id, :value => @event.id %>
            <%= f.submit "応募する", class: "btn btn-success px-3 mx-3" %>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>